Very small magnetic particles in rocks and other materials can store information about what the Earthâ€™s magnetic field was like in the past. 
But not all particles are good recorders of this magnetic information, and some may have recorded different overlapping directions and strengths. 
So it is important to measure each particle separately in order to identify and separate the good recorders from the bad ones. 
A device called a ``quantum diamond microscope'' is able to measure the magnetic field near the surface of a rock sample at microscopic scale. 
We propose a new method for processing data from this microscope that is able to find out the individual magnetizations of large amounts of small magnetic particles automatically.
We created a computer program to execute the method, which calculates the 3D position and magnetization of each particle using the simple model of a magnetic dipole. 
We tested the method on simulated data, using fake magnetic particles for which we know the correct magnetization and position, and real data, both of which showed good results in most cases. 
The method we created has the potential to enable the widespread study of the magnetism of natural materials with more detail than before.